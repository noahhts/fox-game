{"mappings":"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","sources":["<anon>","src/init.js","src/gameState.js","src/ui.js","src/constants.js","src/buttons.js"],"sourcesContent":["const $ea23bd7a63c9796f$export$31edf49e44578506 = function modFox(state) {\n    document.querySelector(\".fox\").className = `fox fox-${state}`;\n};\nconst $ea23bd7a63c9796f$export$1f9518c2c59b8e99 = function modScene(state) {\n    document.querySelector(\".game\").className = `game ${state}`;\n};\nconst $ea23bd7a63c9796f$export$7ee9422b060e0e7b = function togglePoopBag(show) {\n    document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\n};\nconst $ea23bd7a63c9796f$export$cd949469e93f219e = function writeModal(text = \"\") {\n    document.querySelector(\".modal\").innerHTML = `<div class=\"modal-inner\">${text}</div>`;\n};\n\n\nconst $30527df661259f19$export$254fa44e74c824df = 3000;\nconst $30527df661259f19$export$fde44257752a9f60 = [\n    \"fish\",\n    \"poop\",\n    \"weather\"\n];\nconst $30527df661259f19$export$d109769b7b60b20b = 0.2;\nconst $30527df661259f19$export$d3112996f706f1c = [\n    \"day\",\n    \"rain\"\n];\nconst $30527df661259f19$export$6deaf3182f1c1b32 = 45;\nconst $30527df661259f19$export$d948a4fe06c2f359 = 3;\nconst $30527df661259f19$export$57d09a4d1c60d13c = (clock)=>Math.floor(Math.random() * 3) + 5 + clock;\nconst $30527df661259f19$export$90ecfaab96696ff = (clock)=>Math.floor(Math.random() * 2) + 3 + clock;\nconst $30527df661259f19$export$c0dfc64653b730bf = (clock)=>Math.floor(Math.random() * 3) + 4 + clock;\n\n\nconst $c9bfdfadb452e31c$var$gameState = {\n    current: \"INIT\",\n    scene: -1,\n    clock: 1,\n    wakeTime: -1,\n    sleepTime: -1,\n    hungryTime: -1,\n    dieTime: -1,\n    poopTime: -1,\n    timeToStartCelebrating: -1,\n    timeToEndCelebrating: -1,\n    tick () {\n        this.clock++;\n        if (this.clock === this.wakeTime) this.wake();\n        else if (this.clock === this.sleepTime) this.sleep();\n        else if (this.clock === this.hungryTime) this.getHungry();\n        else if (this.clock === this.dieTime) this.die();\n        else if (this.clock === this.timeToStartCelebrating) this.startCelebrating();\n        else if (this.clock === this.timeToEndCelebrating) this.endCelebrating();\n        else if (this.clock === this.poopTime) this.poop();\n        return this.clock;\n    },\n    startGame () {\n        this.current = \"HATCHING\";\n        this.wakeTime = this.clock + 3;\n        (0, $ea23bd7a63c9796f$export$31edf49e44578506)(\"egg\");\n        (0, $ea23bd7a63c9796f$export$1f9518c2c59b8e99)(\"day\");\n        (0, $ea23bd7a63c9796f$export$cd949469e93f219e)();\n    },\n    wake () {\n        this.current = \"IDLING\";\n        this.wakeTime = -1;\n        this.scene = Math.random() > (0, $30527df661259f19$export$d109769b7b60b20b) ? 0 : 1;\n        (0, $ea23bd7a63c9796f$export$1f9518c2c59b8e99)((0, $30527df661259f19$export$d3112996f706f1c)[this.scene]);\n        this.sleepTime = this.clock + (0, $30527df661259f19$export$6deaf3182f1c1b32);\n        this.hungryTime = (0, $30527df661259f19$export$57d09a4d1c60d13c)(this.clock);\n        this.determineFoxState();\n    },\n    sleep () {\n        this.current = \"SLEEP\";\n        (0, $ea23bd7a63c9796f$export$31edf49e44578506)(\"sleep\");\n        (0, $ea23bd7a63c9796f$export$1f9518c2c59b8e99)(\"night\");\n        this.clearTimes();\n        this.wakeTime = this.clock + (0, $30527df661259f19$export$d948a4fe06c2f359);\n    },\n    clearTimes () {\n        this.wakeTime = -1;\n        this.sleepTime = -1;\n        this.hungryTime = -1;\n        this.dieTime = -1;\n        this.poopTime = -1;\n        this.timeToStartCelebrating = -1;\n        this.timeToEndCelebrating = -1;\n    },\n    getHungry () {\n        this.current = \"HUNGRY\";\n        this.dieTime = (0, $30527df661259f19$export$90ecfaab96696ff)(this.clock);\n        this.hungryTime = -1;\n        (0, $ea23bd7a63c9796f$export$31edf49e44578506)(\"hungry\");\n    },\n    poop () {\n        this.current = \"POOPING\";\n        this.poopTime = -1;\n        this.dieTime = (0, $30527df661259f19$export$90ecfaab96696ff)(this.clock);\n        (0, $ea23bd7a63c9796f$export$31edf49e44578506)(\"pooping\");\n    },\n    die () {\n        this.current = \"DEAD\";\n        (0, $ea23bd7a63c9796f$export$1f9518c2c59b8e99)(\"dead\");\n        (0, $ea23bd7a63c9796f$export$31edf49e44578506)(\"dead\");\n        this.clearTimes();\n        (0, $ea23bd7a63c9796f$export$cd949469e93f219e)(\"The fox died :( <br/> Press the middle button to restart\");\n    },\n    startCelebrating () {\n        this.current = \"CELEBRATING\";\n        (0, $ea23bd7a63c9796f$export$31edf49e44578506)(\"celebrate\");\n        this.timeToStartCelebrating = -1;\n        this.timeToEndCelebrating = this.clock + 2;\n    },\n    endCelebrating () {\n        this.current = \"IDLING\";\n        this.timeToEndCelebrating = -1;\n        this.determineFoxState();\n        (0, $ea23bd7a63c9796f$export$7ee9422b060e0e7b)(false);\n    },\n    determineFoxState () {\n        if (this.current === \"IDLING\") {\n            if ((0, $30527df661259f19$export$d3112996f706f1c)[this.scene] === \"rain\") (0, $ea23bd7a63c9796f$export$31edf49e44578506)(\"rain\");\n            else (0, $ea23bd7a63c9796f$export$31edf49e44578506)(\"idling\");\n        }\n    },\n    handleUserAction (icon) {\n        if ([\n            \"SLEEP\",\n            \"FEEDING\",\n            \"CELEBRATING\",\n            \"HATCHING\"\n        ].includes(this.current)) // do nothing\n        return;\n        if (this.current === \"INIT\" || this.current === \"DEAD\") {\n            this.startGame();\n            return;\n        }\n        switch(icon){\n            case \"weather\":\n                this.changeWeather();\n                break;\n            case \"poop\":\n                this.cleanUpPoop();\n                break;\n            case \"fish\":\n                this.feed();\n        }\n    },\n    changeWeather () {\n        this.scene = (this.scene + 1) % (0, $30527df661259f19$export$d3112996f706f1c).length;\n        (0, $ea23bd7a63c9796f$export$1f9518c2c59b8e99)((0, $30527df661259f19$export$d3112996f706f1c)[this.scene]);\n        this.determineFoxState();\n    },\n    cleanUpPoop () {\n        if (this.current !== \"POOPING\") return;\n        this.dieTime = -1;\n        (0, $ea23bd7a63c9796f$export$7ee9422b060e0e7b)(true);\n        this.startCelebrating();\n        this.hungryTime = (0, $30527df661259f19$export$57d09a4d1c60d13c)(this.clock);\n    },\n    feed () {\n        if (this.current !== \"HUNGRY\") return;\n        this.current = \"FEEDING\";\n        this.dieTime = -1;\n        this.poopTime = (0, $30527df661259f19$export$c0dfc64653b730bf)(this.clock);\n        (0, $ea23bd7a63c9796f$export$31edf49e44578506)(\"eating\");\n        this.timeToStartCelebrating = this.clock + 2;\n    }\n};\nconst $c9bfdfadb452e31c$export$ccab573699251c80 = $c9bfdfadb452e31c$var$gameState.handleUserAction.bind($c9bfdfadb452e31c$var$gameState);\nvar $c9bfdfadb452e31c$export$2e2bcd8739ae039 = $c9bfdfadb452e31c$var$gameState;\n\n\n\n\nconst $30be943f8bd0d4a2$var$toggleHighlighted = (icon, show)=>document.querySelector(`.${(0, $30527df661259f19$export$fde44257752a9f60)[icon]}-icon`).classList.toggle(\"highlighted\", show);\nfunction $30be943f8bd0d4a2$export$2e2bcd8739ae039(handleUserAction) {\n    let selectedIcon = 0;\n    function buttonClick({ target: target }) {\n        if (target.classList.contains(\"left-btn\")) {\n            $30be943f8bd0d4a2$var$toggleHighlighted(selectedIcon, false);\n            selectedIcon = (2 + selectedIcon) % (0, $30527df661259f19$export$fde44257752a9f60).length;\n            $30be943f8bd0d4a2$var$toggleHighlighted(selectedIcon, true);\n        } else if (target.classList.contains(\"right-btn\")) {\n            $30be943f8bd0d4a2$var$toggleHighlighted(selectedIcon, false);\n            selectedIcon = (1 + selectedIcon) % (0, $30527df661259f19$export$fde44257752a9f60).length;\n            $30be943f8bd0d4a2$var$toggleHighlighted(selectedIcon, true);\n        } else handleUserAction((0, $30527df661259f19$export$fde44257752a9f60)[selectedIcon]);\n    }\n    document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n\n\nasync function $ed1f10388746f9c3$var$init() {\n    (0, $30be943f8bd0d4a2$export$2e2bcd8739ae039)((0, $c9bfdfadb452e31c$export$ccab573699251c80));\n    let nextTimeToTick = Date.now();\n    function nextAnimationFrame() {\n        const now = Date.now();\n        if (nextTimeToTick < now) {\n            (0, $c9bfdfadb452e31c$export$2e2bcd8739ae039).tick();\n            nextTimeToTick = now + (0, $30527df661259f19$export$254fa44e74c824df);\n        }\n        requestAnimationFrame(nextAnimationFrame);\n    }\n    requestAnimationFrame(nextAnimationFrame);\n}\n$ed1f10388746f9c3$var$init();\n\n\n//# sourceMappingURL=index.455d9944.js.map\n","import game, { handleUserAction } from \"./gameState\";\nimport { TICK_RATE } from \"./constants\";\nimport initButtons from \"./buttons\";\n\nasync function init() {\n  initButtons(handleUserAction);\n\n  let nextTimeToTick = Date.now();\n\n  function nextAnimationFrame() {\n    const now = Date.now();\n\n    if (nextTimeToTick < now) {\n      game.tick();\n      nextTimeToTick = now + TICK_RATE;\n    }\n\n    requestAnimationFrame(nextAnimationFrame);\n  }\n\n  requestAnimationFrame(nextAnimationFrame);\n}\n\ninit();\n","import { modFox, modScene, togglePoopBag, writeModal } from \"./ui\";\nimport {\n  RAIN_CHANCE,\n  SCENES,\n  DAY_LENGTH,\n  NIGHT_LENGTH,\n  getNextHungerTime,\n  getNextDieTime,\n  getNextPoopTime,\n} from \"./constants\";\n\nconst gameState = {\n  current: \"INIT\",\n  scene: -1,\n  clock: 1,\n  wakeTime: -1,\n  sleepTime: -1,\n  hungryTime: -1,\n  dieTime: -1,\n  poopTime: -1,\n  timeToStartCelebrating: -1,\n  timeToEndCelebrating: -1,\n  tick() {\n    this.clock++;\n    if (this.clock === this.wakeTime) this.wake();\n    else if (this.clock === this.sleepTime) this.sleep();\n    else if (this.clock === this.hungryTime) this.getHungry();\n    else if (this.clock === this.dieTime) this.die();\n    else if (this.clock === this.timeToStartCelebrating)\n      this.startCelebrating();\n    else if (this.clock === this.timeToEndCelebrating) this.endCelebrating();\n    else if (this.clock === this.poopTime) this.poop();\n    return this.clock;\n  },\n  startGame() {\n    this.current = \"HATCHING\";\n    this.wakeTime = this.clock + 3;\n    modFox(\"egg\");\n    modScene(\"day\");\n    writeModal();\n  },\n  wake() {\n    this.current = \"IDLING\";\n    this.wakeTime = -1;\n    this.scene = Math.random() > RAIN_CHANCE ? 0 : 1;\n    modScene(SCENES[this.scene]);\n    this.sleepTime = this.clock + DAY_LENGTH;\n    this.hungryTime = getNextHungerTime(this.clock);\n    this.determineFoxState();\n  },\n  sleep() {\n    this.current = \"SLEEP\";\n    modFox(\"sleep\");\n    modScene(\"night\");\n    this.clearTimes();\n    this.wakeTime = this.clock + NIGHT_LENGTH;\n  },\n  clearTimes() {\n    this.wakeTime = -1;\n    this.sleepTime = -1;\n    this.hungryTime = -1;\n    this.dieTime = -1;\n    this.poopTime = -1;\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = -1;\n  },\n  getHungry() {\n    this.current = \"HUNGRY\";\n    this.dieTime = getNextDieTime(this.clock);\n    this.hungryTime = -1;\n    modFox(\"hungry\");\n  },\n  poop() {\n    this.current = \"POOPING\";\n    this.poopTime = -1;\n    this.dieTime = getNextDieTime(this.clock);\n    modFox(\"pooping\");\n  },\n  die() {\n    this.current = \"DEAD\";\n    modScene(\"dead\");\n    modFox(\"dead\");\n    this.clearTimes();\n    writeModal(\"The fox died :( <br/> Press the middle button to restart\");\n  },\n  startCelebrating() {\n    this.current = \"CELEBRATING\";\n    modFox(\"celebrate\");\n    this.timeToStartCelebrating = -1;\n    this.timeToEndCelebrating = this.clock + 2;\n  },\n  endCelebrating() {\n    this.current = \"IDLING\";\n    this.timeToEndCelebrating = -1;\n    this.determineFoxState();\n    togglePoopBag(false);\n  },\n  determineFoxState() {\n    if (this.current === \"IDLING\") {\n      if (SCENES[this.scene] === \"rain\") modFox(\"rain\");\n      else modFox(\"idling\");\n    }\n  },\n  handleUserAction(icon) {\n    if (\n      [\"SLEEP\", \"FEEDING\", \"CELEBRATING\", \"HATCHING\"].includes(this.current)\n    ) {\n      // do nothing\n      return;\n    }\n    if (this.current === \"INIT\" || this.current === \"DEAD\") {\n      this.startGame();\n      return;\n    }\n    switch (icon) {\n      case \"weather\":\n        this.changeWeather();\n        break;\n      case \"poop\":\n        this.cleanUpPoop();\n        break;\n      case \"fish\":\n        this.feed();\n    }\n  },\n  changeWeather() {\n    this.scene = (this.scene + 1) % SCENES.length;\n    modScene(SCENES[this.scene]);\n    this.determineFoxState();\n  },\n  cleanUpPoop() {\n    if (this.current !== \"POOPING\") return;\n    this.dieTime = -1;\n    togglePoopBag(true);\n    this.startCelebrating();\n    this.hungryTime = getNextHungerTime(this.clock);\n  },\n  feed() {\n    if (this.current !== \"HUNGRY\") return;\n    this.current = \"FEEDING\";\n    this.dieTime = -1;\n    this.poopTime = getNextPoopTime(this.clock);\n    modFox(\"eating\");\n    this.timeToStartCelebrating = this.clock + 2;\n  },\n};\n\nexport const handleUserAction = gameState.handleUserAction.bind(gameState);\nexport default gameState;\n","export const modFox = function modFox(state) {\n  document.querySelector(\".fox\").className = `fox fox-${state}`;\n};\n\nexport const modScene = function modScene(state) {\n  document.querySelector(\".game\").className = `game ${state}`;\n};\n\nexport const togglePoopBag = function togglePoopBag(show) {\n  document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\n};\n\nexport const writeModal = function writeModal(text = \"\") {\n  document.querySelector(\".modal\").innerHTML =\n    `<div class=\"modal-inner\">${text}</div>`;\n};\n","export const TICK_RATE = 3000;\nexport const ICONS = [\"fish\", \"poop\", \"weather\"];\nexport const RAIN_CHANCE = 0.2;\nexport const SCENES = [\"day\", \"rain\"];\nexport const DAY_LENGTH = 45;\nexport const NIGHT_LENGTH = 3;\n\nexport const getNextHungerTime = (clock) =>\n  Math.floor(Math.random() * 3) + 5 + clock;\nexport const getNextDieTime = (clock) =>\n  Math.floor(Math.random() * 2) + 3 + clock;\nexport const getNextPoopTime = (clock) =>\n  Math.floor(Math.random() * 3) + 4 + clock;\n","import { ICONS } from \"./constants\";\n\nconst toggleHighlighted = (icon, show) =>\n  document\n    .querySelector(`.${ICONS[icon]}-icon`)\n    .classList.toggle(\"highlighted\", show);\n\nexport default function initButtons(handleUserAction) {\n  let selectedIcon = 0;\n\n  function buttonClick({ target }) {\n    if (target.classList.contains(\"left-btn\")) {\n      toggleHighlighted(selectedIcon, false);\n      selectedIcon = (2 + selectedIcon) % ICONS.length;\n      toggleHighlighted(selectedIcon, true);\n    } else if (target.classList.contains(\"right-btn\")) {\n      toggleHighlighted(selectedIcon, false);\n      selectedIcon = (1 + selectedIcon) % ICONS.length;\n      toggleHighlighted(selectedIcon, true);\n    } else {\n      handleUserAction(ICONS[selectedIcon]);\n    }\n  }\n\n  document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n"],"names":["$ea23bd7a63c9796f$export$31edf49e44578506","state","document","querySelector","className","$ea23bd7a63c9796f$export$1f9518c2c59b8e99","$ea23bd7a63c9796f$export$7ee9422b060e0e7b","show","classList","toggle","$ea23bd7a63c9796f$export$cd949469e93f219e","text","innerHTML","$30527df661259f19$export$fde44257752a9f60","$30527df661259f19$export$d3112996f706f1c","$30527df661259f19$export$57d09a4d1c60d13c","clock","Math","floor","random","$30527df661259f19$export$90ecfaab96696ff","$30527df661259f19$export$c0dfc64653b730bf","$c9bfdfadb452e31c$var$gameState","current","scene","wakeTime","sleepTime","hungryTime","dieTime","poopTime","timeToStartCelebrating","timeToEndCelebrating","tick","wake","sleep","getHungry","die","startCelebrating","endCelebrating","poop","startGame","determineFoxState","clearTimes","handleUserAction","icon","includes","changeWeather","cleanUpPoop","feed","length","$c9bfdfadb452e31c$export$ccab573699251c80","bind","$30be943f8bd0d4a2$var$toggleHighlighted","$ed1f10388746f9c3$var$init","selectedIcon","addEventListener","target","contains","nextTimeToTick","Date","now","requestAnimationFrame","nextAnimationFrame"],"version":3,"file":"index.455d9944.js.map"}